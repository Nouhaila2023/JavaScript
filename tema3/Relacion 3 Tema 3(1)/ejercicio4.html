<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
</head>
<body>
    
    <form>
        <label for="nombre">Introduce tu nombre:</label>
        <input type="text" id="nombre"><br>

        <label for="apellido">Introduce tu apellido:</label>
        <input type="text" id="apellido"><br>

        <label for="email">Introduce tu email:</label>
        <input type="email" id="email"><br>

        <label for="opcion">Elige tu opción:</label>
        <select id="opcion">
            <option value="Informática">Informática</option>
            <option value="Matemática">Matemática</option>
        </select><br>

        <label for="color">Elige un color de fondo:</label>
        <input type="color" id="color"><br><br>
        
        <input type="button" value="Enviar Datos" onclick="abrirVentana();">
        <input type="button" value="Cancelar" onclick="cancelar();">
    </form>

    <script>
        let ventana = null;

        function abrirVentana() {
            const nombre = document.getElementById("nombre").value;
            const apellido = document.getElementById("apellido").value;
            const email = document.getElementById("email").value;
            const opcion = document.getElementById("opcion").value;
            const color = document.getElementById("color").value;

            if (!nombre || !apellido || !email) {
                alert("Por favor, completa todos los campos antes de continuar.");
                return;
            }

            ventana = window.open("", "Mi Ventana", "width=500,height=500");
            ventana.document.write(`
                <html>
                <head><title>Datos del Usuario</title></head>
                <body style="background-color:${color}; font-family:Arial; text-align:center;">
                    <h1>Bienvenido a mi Web</h1>
                    <p><strong>Nombre:</strong> ${nombre} ${apellido}</p>
                    <p><strong>Email:</strong> ${email}</p>
                    <p><strong>Opción elegida:</strong> ${opcion}</p>
                </body>
                </html>
            `);
        }

        function cancelar() {
            document.getElementById("nombre").value = "";
            document.getElementById("apellido").value = "";
            document.getElementById("email").value = "";
            document.getElementById("opcion").selectedIndex = 0;
            document.getElementById("color").value = "#ffffff";
            
            if (ventana && !ventana.closed) {
                ventana.close();
            }
        }
    </script>

</body>
</html>
